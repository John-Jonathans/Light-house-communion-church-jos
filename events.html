<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events & Gallery - Lighthouse Communion Church</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'church-gold': '#FFD700',   
                        'church-orange': '#6B21A8', 
                        'church-dark': '#111827',   
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    },
                }
            }
        }
    </script>

    <style>
        html { scroll-behavior: smooth; }
        .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gray-50 text-gray-800 antialiased font-sans">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const MenuIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="4" y1="12" x2="20" y2="12"></line><line x1="4" y1="6" x2="20" y2="6"></line><line x1="4" y1="18" x2="20" y2="18"></line></svg>;
        const XIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>;
        const CalendarIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>;
        const ClockIcon = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>;

        const Navbar = () => {
            const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);
            const navLinks = [
                { name: 'Home', href: 'index.html' },
                { name: 'The Bishop', href: 'leadership.html' },
                { name: 'Library', href: 'books.html' },
                { name: 'Events', href: 'events.html' },
            ];

            return (
                <nav className="fixed w-full z-50 bg-white shadow-md py-3 transition-all">
                    <div className="container mx-auto px-6 flex justify-between items-center">
                        <a href="index.html" className="flex items-center gap-2 group z-50">
                            <div className="w-8 h-8 rounded-full flex items-center justify-center bg-church-orange text-white">
                                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polygon points="12 2 2 7 12 12 22 7 12 2"></polygon><polyline points="2 17 12 22 22 17"></polyline><polyline points="2 12 12 17 22 12"></polyline></svg>
                            </div>
                            <span className="font-serif font-bold text-lg tracking-wide text-gray-900">Lighthouse</span>
                        </a>

                        <div className="hidden md:flex space-x-8 items-center">
                            {navLinks.map((link) => <a key={link.name} href={link.href} className="text-sm font-semibold tracking-wide hover:text-church-orange transition-colors text-gray-700">{link.name}</a>)}
                        </div>

                        <button className="md:hidden text-gray-800 focus:outline-none z-50 p-1" onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}>
                            {isMobileMenuOpen ? <XIcon /> : <MenuIcon />}
                        </button>
                    </div>

                    {isMobileMenuOpen && (
                        <div className="fixed inset-0 bg-white z-40 pt-24 px-6 animate-fade-in flex flex-col gap-6">
                            {navLinks.map((link) => <a key={link.name} href={link.href} className="text-2xl font-serif text-gray-900 border-b pb-2">{link.name}</a>)}
                        </div>
                    )}
                </nav>
            );
        };

        const Header = () => (
            <div className="bg-church-dark pt-28 pb-12 md:pt-36 md:pb-20 relative overflow-hidden">
                <div className="container mx-auto px-6 text-center relative z-10">
                    <h1 className="text-church-gold font-serif text-3xl md:text-5xl font-bold mb-3 md:mb-4">Events & Gatherings</h1>
                    <p className="text-white/80 text-base md:text-lg max-w-2xl mx-auto font-light">Join us in fellowship and see what God is doing.</p>
                </div>
            </div>
        );

        const WeeklySchedule = () => {
            const services = [
                { day: "Sunday", time: "9:00 AM", title: "Worship Service", desc: "A time of power, praise, and the Word." },
                { day: "Wednesday", time: "6:00 PM", title: "Bible Study", desc: "Digging deep into scriptures for spiritual growth." },
                { day: "Friday", time: "6:00 PM", title: "Prayer Meeting", desc: "Communion and intercession for the nations." }
            ];
            return (
                <section className="py-12 md:py-20 bg-white">
                    <div className="container mx-auto px-6">
                        <div className="text-center mb-10 md:mb-16">
                            <h2 className="font-serif text-2xl md:text-3xl font-bold text-church-dark">Weekly Gatherings</h2>
                            <div className="w-16 h-1 bg-church-orange mx-auto mt-3 rounded-full"></div>
                        </div>
                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
                            {services.map((service, idx) => (
                                <div key={idx} className="bg-gray-50 rounded-xl p-6 md:p-8 border border-gray-100 shadow-sm hover:shadow-lg transition group flex flex-col items-center text-center">
                                    <div className="flex items-center gap-3 mb-4">
                                        <div className="w-10 h-10 rounded-full bg-church-orange/10 flex items-center justify-center text-church-orange group-hover:bg-church-orange group-hover:text-white transition"><CalendarIcon /></div>
                                        <span className="font-bold text-lg text-church-dark">{service.day}</span>
                                    </div>
                                    <h3 className="text-xl md:text-2xl font-serif font-bold mb-2">{service.title}</h3>
                                    <div className="flex items-center gap-2 text-church-orange font-medium mb-4 text-sm md:text-base justify-center"><ClockIcon /> <span>{service.time}</span></div>
                                    <p className="text-gray-600 text-sm md:text-base leading-relaxed">{service.desc}</p>
                                </div>
                            ))}
                        </div>
                    </div>
                </section>
            );
        };

        const DynamicEvents = () => {
            const [events, setEvents] = useState([]);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                fetch('events.json')
                    .then(res => res.json())
                    .then(data => {
                        if (data.events && data.events.length > 0) {
                            setEvents(data.events);
                        }
                        setLoading(false);
                    })
                    .catch(err => {
                        console.error("Error loading events:", err);
                        setLoading(false);
                    });
            }, []);

            if (loading) {
                return (
                    <section className="py-16 md:py-20 bg-church-dark text-white text-center">
                        <div className="animate-spin rounded-full h-12 w-12 border-b-2 border-church-orange mx-auto"></div>
                        <p className="mt-4 text-gray-400">Loading upcoming events...</p>
                    </section>
                );
            }

            if (events.length === 0) {
                return (
                    <section className="py-16 md:py-20 bg-church-dark text-white text-center">
                        <h2 className="font-serif text-3xl font-bold mb-4">Upcoming Special Events</h2>
                        <p className="text-gray-400">No special events scheduled at the moment. Join us for our weekly gatherings!</p>
                    </section>
                );
            }

            return (
                <section className="py-16 md:py-20 bg-church-dark text-white relative overflow-hidden">
                    <div className="container mx-auto px-6 relative z-10">
                        <div className="mb-8 md:mb-12 text-center md:text-left">
                            <h4 className="text-church-orange font-bold uppercase tracking-widest text-xs md:text-sm mb-2">Mark Your Calendar</h4>
                            <h2 className="font-serif text-3xl md:text-4xl font-bold">Upcoming Special Events</h2>
                        </div>
                        
                        <div className="flex overflow-x-auto snap-x snap-mandatory scroll-smooth gap-6 pb-8 no-scrollbar">
                            {events.map((event, idx) => {
                                let imgPath = event.image || '';
                                if (imgPath.startsWith('/')) imgPath = imgPath.substring(1);

                                return (
                                    <div key={idx} className="min-w-[85vw] md:min-w-[600px] snap-center snap-always bg-white/5 backdrop-blur-sm border border-white/10 rounded-2xl p-6 md:p-8 flex flex-col md:flex-row gap-6 items-center">
                                        
                                        {/* Optional Image Area */}
                                        {imgPath && (
                                            <div className="w-full md:w-1/3 h-48 md:h-full rounded-xl overflow-hidden flex-shrink-0">
                                                <img src={imgPath} alt={event.title} className="w-full h-full object-cover" />
                                            </div>
                                        )}

                                        <div className="w-full text-center md:text-left flex-grow">
                                            <span className="bg-church-gold/20 text-church-gold px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide mb-3 inline-block">Special Event</span>
                                            <h3 className="text-2xl md:text-3xl font-serif font-bold mb-2">{event.title || 'Untitled Event'}</h3>
                                            <div className="text-church-orange font-bold text-lg mb-4 flex items-center justify-center md:justify-start gap-2">
                                                <CalendarIcon /> {event.date || 'Date TBD'}
                                            </div>
                                            <p className="text-gray-300 text-sm md:text-base leading-relaxed whitespace-pre-line">
                                                {event.description || 'No description provided.'}
                                            </p>
                                        </div>
                                    </div>
                                )
                            })}
                        </div>
                    </div>
                </section>
            );
        };

        const Footer = () => {
            return (
                <footer className="bg-church-dark text-white pt-12 md:pt-16 pb-8 border-t border-gray-800 mt-auto">
                    <div className="container mx-auto px-6 text-center text-xs md:text-sm text-gray-500">
                        <p>&copy; 2026 Lighthouse Communion Church. All rights reserved.</p>
                    </div>
                </footer>
            );
        };

        const App = () => {
            return (
                <div className="min-h-screen flex flex-col">
                    <Navbar />
                    <Header />
                    <WeeklySchedule />
                    <DynamicEvents />
                    <Footer />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
